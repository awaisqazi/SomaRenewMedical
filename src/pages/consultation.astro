---
import MainLayout from "../layouts/MainLayout.astro";
---

<MainLayout title="Reserve Your Experience">
  <!-- Wellness Concierge Booking Experience -->
  <section
    class="min-h-[calc(100vh-80px)] py-4 md:py-6 flex flex-col"
    style="background: linear-gradient(135deg, #FDFDFD 0%, #F8F6F0 100%);"
  >
    <!-- Subtle ambient glow -->
    <div
      class="fixed top-1/4 left-1/4 w-96 h-96 bg-[var(--soma-gold)]/5 rounded-full blur-3xl pointer-events-none"
    ></div>
    <div
      class="fixed bottom-1/4 right-1/4 w-80 h-80 bg-[var(--sage-green)]/5 rounded-full blur-3xl pointer-events-none"
    ></div>

    <div class="w-full px-4 md:px-8 lg:px-12 flex-1 flex flex-col relative z-10">
      
      <!-- Elegant Header with Decorative Elements -->
      <div class="text-center mb-4 md:mb-6">
        <!-- Decorative flourish -->
        <div class="flex items-center justify-center gap-4 mb-3">
          <div class="h-px w-8 md:w-16 bg-gradient-to-r from-transparent to-[var(--soma-gold)]/60"></div>
          <svg class="w-5 h-5 text-[var(--soma-gold)]/70" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2L9.19 8.63L2 9.24L7.46 13.97L5.82 21L12 17.27L18.18 21L16.54 13.97L22 9.24L14.81 8.63L12 2Z"/>
          </svg>
          <div class="h-px w-8 md:w-16 bg-gradient-to-l from-transparent to-[var(--soma-gold)]/60"></div>
        </div>
        
        <h1 class="text-2xl md:text-3xl lg:text-4xl font-semibold text-[var(--charcoal)] mb-2">
          Reserve Your Experience
        </h1>
        <p class="text-sm md:text-base text-[var(--secondary-text)] max-w-lg mx-auto">
          Curated wellness treatments. No referral required. Instant confirmation.
        </p>
      </div>

      <!-- The Sanctuary Frame - Full Width Booking Container -->
      <div class="w-full max-w-[1400px] mx-auto flex-1 flex flex-col mb-4">
        
        <!-- External link - touch-friendly on mobile, subtle on desktop -->
        <div class="flex justify-end mb-2 md:mb-3">
          <a
            href="https://partner.pabau.com/online-bookings/soma-renew-medical?category=195676&location=24088&staff=115036&fallback=true"
            target="_blank"
            rel="noopener noreferrer"
            class="external-link inline-flex items-center gap-1.5 
                   px-3 py-2 md:px-0 md:py-0
                   text-sm md:text-xs 
                   text-[var(--secondary-text)] md:text-[var(--secondary-text)]/70
                   bg-[var(--soma-gold)]/10 md:bg-transparent
                   border border-[var(--soma-gold)]/20 md:border-transparent
                   rounded-full md:rounded-none
                   hover:text-[var(--soma-gold)] hover:bg-[var(--soma-gold)]/15 md:hover:bg-transparent
                   active:scale-95 md:active:scale-100
                   transition-all duration-300"
          >
            <span>Open externally</span>
            <svg class="w-3.5 h-3.5 md:w-3 md:h-3 text-[var(--soma-gold)] md:text-current" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25"></path>
            </svg>
          </a>
        </div>

        <!-- Luxurious Frame Container -->
        <div class="booking-sanctuary relative flex-1 rounded-2xl md:rounded-3xl overflow-hidden">
          
          <!-- Decorative corner accents -->
          <div class="absolute top-0 left-0 w-16 h-16 pointer-events-none z-20">
            <div class="absolute top-3 left-3 w-8 h-px bg-[var(--soma-gold)]/40"></div>
            <div class="absolute top-3 left-3 w-px h-8 bg-[var(--soma-gold)]/40"></div>
          </div>
          <div class="absolute top-0 right-0 w-16 h-16 pointer-events-none z-20">
            <div class="absolute top-3 right-3 w-8 h-px bg-[var(--soma-gold)]/40"></div>
            <div class="absolute top-3 right-3 w-px h-8 bg-[var(--soma-gold)]/40"></div>
          </div>
          <div class="absolute bottom-0 left-0 w-16 h-16 pointer-events-none z-20">
            <div class="absolute bottom-3 left-3 w-8 h-px bg-[var(--soma-gold)]/40"></div>
            <div class="absolute bottom-3 left-3 w-px h-8 bg-[var(--soma-gold)]/40"></div>
          </div>
          <div class="absolute bottom-0 right-0 w-16 h-16 pointer-events-none z-20">
            <div class="absolute bottom-3 right-3 w-8 h-px bg-[var(--soma-gold)]/40"></div>
            <div class="absolute bottom-3 right-3 w-px h-8 bg-[var(--soma-gold)]/40"></div>
          </div>

          <!-- Loading State -->
          <div class="absolute inset-0 flex items-center justify-center bg-white/90 z-0">
            <div class="flex flex-col items-center gap-3">
              <div class="loading-spinner"></div>
              <span class="text-xs text-[var(--secondary-text)] tracking-widest uppercase">Preparing your experience</span>
            </div>
          </div>

          <!-- The Pabau Booking Iframe -->
          <iframe
            src="https://partner.pabau.com/online-bookings/soma-renew-medical?category=195676&location=24088&staff=115036&fallback=true"
            width="100%"
            height="100%"
            class="relative z-10 w-full h-full"
            style="border: none; background: white;"
            title="Reserve Your Wellness Experience"
            loading="eager"
          ></iframe>
        </div>
      </div>

      <!-- Minimal Assistance Footer -->
      <div class="text-center py-2">
        <div class="flex flex-wrap justify-center items-center gap-3 md:gap-6 text-xs md:text-sm text-[var(--secondary-text)]">
          <span class="opacity-60">Questions?</span>
          <a
            class="inline-flex items-center gap-1.5 hover:text-[var(--soma-gold)] transition-colors"
            href="tel:+13105550123"
          >
            <svg class="w-3.5 h-3.5 text-[var(--soma-gold)]" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"></path>
            </svg>
            <span>(310) 555-0123</span>
          </a>
          <span class="opacity-30">|</span>
          <a
            class="inline-flex items-center gap-1.5 hover:text-[var(--soma-gold)] transition-colors"
            href="mailto:contact@somarenew.com"
          >
            <svg class="w-3.5 h-3.5 text-[var(--soma-gold)]" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"></path>
            </svg>
            <span>contact@somarenew.com</span>
          </a>
        </div>
      </div>
    </div>
  </section>

  <style>
    /* Loading Spinner - Elegant Gold */
    .loading-spinner {
      width: 32px;
      height: 32px;
      border: 2px solid rgba(192, 178, 131, 0.15);
      border-top-color: var(--soma-gold);
      border-radius: 50%;
      animation: spin 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* Sanctuary Frame - Luxurious Container */
    .booking-sanctuary {
      display: flex;
      flex-direction: column;
      min-height: calc(100vh - 220px);
      background: white;
      border: 1px solid rgba(192, 178, 131, 0.25);
      box-shadow: 
        0 4px 6px -1px rgba(192, 178, 131, 0.08),
        0 20px 40px -8px rgba(54, 69, 79, 0.12),
        0 0 0 1px rgba(255, 255, 255, 0.9) inset;
    }

    .booking-sanctuary iframe {
      flex: 1;
      min-height: calc(100vh - 220px);
    }

    /* Mobile - maximize screen usage */
    @media (max-width: 640px) {
      .booking-sanctuary {
        min-height: calc(100vh - 200px);
        border-radius: 0.75rem;
      }

      .booking-sanctuary iframe {
        min-height: calc(100vh - 200px);
      }
    }

    /* Tablet */
    @media (min-width: 641px) and (max-width: 1024px) {
      .booking-sanctuary {
        min-height: calc(100vh - 200px);
      }

      .booking-sanctuary iframe {
        min-height: calc(100vh - 200px);
      }
    }

    /* Large screens - generous height */
    @media (min-width: 1025px) {
      .booking-sanctuary {
        min-height: calc(100vh - 180px);
      }

      .booking-sanctuary iframe {
        min-height: calc(100vh - 180px);
      }
    }

    /* Extra large screens */
    @media (min-width: 1600px) {
      .booking-sanctuary {
        min-height: calc(100vh - 160px);
      }

      .booking-sanctuary iframe {
        min-height: calc(100vh - 160px);
      }
    }
  </style>
</MainLayout>
