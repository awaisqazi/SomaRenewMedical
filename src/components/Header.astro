---
const pathname = Astro.url.pathname;
const base = import.meta.env.BASE_URL;

// A little helper to handle the homepage path correctly, which sometimes has a trailing slash
const homePath = base.endsWith('/') ? base : base + '/';
---
<header x-data="{ isOpen: false }" @keydown.escape.window="isOpen = false" class="bg-[var(--background)]/80 backdrop-blur-sm">
  <div class="container mx-auto px-6 py-4">
    <div class="flex flex-wrap items-center justify-between">
    <a href="/">
      <img src="/logo.svg" alt="SomaRenew Medical Logo" class="h-12 w-auto" />
    </a>
     
      
      <nav class="hidden md:flex items-center gap-8">
        <a class:list={["nav-link text-lg", { "font-bold text-[var(--accent-gold)]": pathname === base || pathname === homePath }]} href="/">Home</a>
        <a class:list={["nav-link text-lg", { "font-bold text-[var(--accent-gold)]": pathname.startsWith(`${base}/aboutus`) }]} href="/aboutus">About Us</a>
        <a class:list={["nav-link text-lg", { "font-bold text-[var(--accent-gold)]": pathname.startsWith(`${base}/services`) }]} href="/services">Services</a>
        <a class:list={["nav-link text-lg", { "font-bold text-[var(--accent-gold)]": pathname.startsWith(`${base}/patientjourney`) }]} href="/patientjourney">The Patient Journey</a>
        <a class:list={["nav-link text-lg", { "font-bold text-[var(--accent-gold)]": pathname.startsWith(`${base}/contact`) }]} href="/contact">Contact Us</a>
      </nav>
      <a class="btn-primary hidden md:inline-block rounded-full px-8 py-3 text-lg font-semibold tracking-wide" href="/consultation">Schedule My Consultation</a>
      
      <button @click="isOpen = !isOpen" class="md:hidden text-3xl text-[var(--primary-text)]">
        â˜°
      </button>
    </div>

    <nav x-show="isOpen" @click.away="isOpen = false" class="w-full md:hidden" x-transition>
      <div class="flex flex-col items-center gap-4 py-8">
        <a class:list={["nav-link text-lg", { "font-bold text-[var(--accent-gold)]": pathname === base || pathname === homePath }]} href="/">Home</a>
        <a class:list={["nav-link text-lg", { "font-bold text-[var(--accent-gold)]": pathname.startsWith(`${base}/aboutus`) }]} href="/aboutus">About Us</a>
        <a class:list={["nav-link text-lg", { "font-bold text-[var(--accent-gold)]": pathname.startsWith(`${base}/services`) }]} href="/services">Services</a>
        <a class:list={["nav-link text-lg", { "font-bold text-[var(--accent-gold)]": pathname.startsWith(`${base}/patientjourney`) }]} href="/patientjourney">The Patient Journey</a>
        <a class:list={["nav-link text-lg", { "font-bold text-[var(--accent-gold)]": pathname.startsWith(`${base}/contact`) }]} href="/contact">Contact Us</a>
      </div>
    </nav>
  </div>
</header>
